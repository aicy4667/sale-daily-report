<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¥­å‹™æ—¥å ±è¡¨ç”Ÿæˆå™¨</title>

    <!-- 1. å¼•å…¥ Tailwind CSS (æ¨£å¼) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 2. å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- 3. å¼•å…¥ Babel (è®“ç€è¦½å™¨çœ‹æ‡‚ JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- æ³¨æ„ï¼šç§»é™¤äº† Lucide React çš„ CDNï¼Œæ”¹ç”¨å…§å»º SVG ä»¥é¿å…éŒ¯èª¤ -->

    <!-- è‡ªå®šç¾©åˆ—å°æ¨£å¼ -->
    <style>
        @media print {
            @page { margin: 10mm; size: A4; }
            body { background: white; -webkit-print-color-adjust: exact; }
            .print\:hidden { display: none !important; }
            .print\:shadow-none { box-shadow: none !important; }
            .print\:border-none { border: none !important; }
            input, textarea { border: none !important; resize: none !important; background: transparent !important; }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <!-- æ‚¨çš„ React ç¨‹å¼ç¢¼ -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- å…§å»ºåœ–æ¨™çµ„ä»¶ (è§£æ±º CDN è¼‰å…¥éŒ¯èª¤å•é¡Œ) ---
        // é€™äº›æ˜¯å°‡ SVG ç›´æ¥å¯«å…¥ç¨‹å¼ç¢¼ï¼Œç¢ºä¿æ°¸é å¯ç”¨ï¼Œä¸å†ä¾è³´å¤–éƒ¨è…³æœ¬
        const IconBase = ({ children, ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" height="24" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                {...props}
            >
                {children}
            </svg>
        );

        const FileText = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></IconBase>;
        const Briefcase = (props) => <IconBase {...props}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconBase>;
        const Plus = (props) => <IconBase {...props}><path d="M5 12h14"/><path d="M12 5v14"/></IconBase>;
        const Trash2 = (props) => <IconBase {...props}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconBase>;
        const MapPin = (props) => <IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const User = (props) => <IconBase {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const MessageSquare = (props) => <IconBase {...props}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const FileDown = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M12 18v-6"/><path d="m9 15 3 3 3-3"/></IconBase>;
        
        // ç‚ºäº†ç›¸å®¹åŸæœ¬çš„æŒ‰éˆ•æ¨£å¼ï¼ŒåŠ å…¥é€™å…©å€‹
        const Printer = (props) => <IconBase {...props}><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></IconBase>;
        const Download = (props) => <IconBase {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></IconBase>;

        // --------------------------------------------------------

        const App = () => {
            // åŸºæœ¬è³‡è¨Šç‹€æ…‹
            const [reportDate, setReportDate] = useState(new Date().toISOString().split('T')[0]);
            const [salesName, setSalesName] = useState('');
            const [department, setDepartment] = useState('');
            
            // ç‹€æ…‹æç¤ºè¨Šæ¯
            const [statusMessage, setStatusMessage] = useState('');

            // æ‹œè¨ªç´€éŒ„åˆ—è¡¨ç‹€æ…‹
            const [visits, setVisits] = useState([
                { id: 1, storeName: '', contactPerson: '', content: '', nextStep: '', result: '' }
            ]);

            // ä¸»ç®¡æºé€šæ¬„ç‹€æ…‹
            const [noteToSupervisor, setNoteToSupervisor] = useState('');

            // æ–°å¢ä¸€ç­†æ‹œè¨ªç´€éŒ„
            const addVisit = () => {
                const newId = visits.length > 0 ? Math.max(...visits.map(v => v.id)) + 1 : 1;
                setVisits([...visits, { id: newId, storeName: '', contactPerson: '', content: '', nextStep: '', result: '' }]);
            };

            // åˆªé™¤ä¸€ç­†æ‹œè¨ªç´€éŒ„
            const removeVisit = (id) => {
                if (visits.length > 1) {
                    setVisits(visits.filter(v => v.id !== id));
                }
            };

            // æ›´æ–°æ‹œè¨ªç´€éŒ„å…§å®¹
            const updateVisit = (id, field, value) => {
                setVisits(visits.map(v => v.id === id ? { ...v, [field]: value } : v));
            };

            // --- æ ¸å¿ƒè§£æ±ºæ–¹æ¡ˆï¼šç”Ÿæˆä¸¦ä¸‹è¼‰ç¨ç«‹ HTML æª”æ¡ˆ ---
            const handleExportHTML = () => {
                setStatusMessage('æ­£åœ¨ç”Ÿæˆæª”æ¡ˆ...');

                // 1. æ§‹å»ºæ‹œè¨ªç´€éŒ„çš„ HTML å­—ä¸² (å…§è¯æ¨£å¼ä»¥ç¢ºä¿è·¨å¹³å°ç›¸å®¹)
                const visitsHTML = visits.map(v => `
                <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.25rem; margin-bottom: 1.5rem; break-inside: avoid;">
                    <div style="display: grid; grid-template-columns: repeat(12, minmax(0, 1fr)); gap: 1rem;">
                    <div style="grid-column: span 8 / span 8;">
                        <div style="font-size: 0.75rem; font-weight: 700; color: #6b7280; margin-bottom: 0.25rem;">åº—å®¶åç¨± / å®¢æˆ¶</div>
                        <div style="font-size: 1.125rem; font-weight: 700; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.25rem;">${v.storeName || '&nbsp;'}</div>
                    </div>
                    <div style="grid-column: span 4 / span 4;">
                        <div style="font-size: 0.75rem; font-weight: 700; color: #6b7280; margin-bottom: 0.25rem;">å°æ¥äººå“¡</div>
                        <div style="font-size: 1rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.25rem;">${v.contactPerson || '&nbsp;'}</div>
                    </div>
                    <div style="grid-column: span 12 / span 12; margin-top: 0.5rem;">
                        <div style="font-size: 0.75rem; font-weight: 700; color: #6b7280; margin-bottom: 0.25rem;">æ‹œè¨ªå…§å®¹</div>
                        <div style="font-size: 0.875rem; line-height: 1.625; white-space: pre-wrap; background-color: #f9fafb; padding: 0.5rem; border-radius: 0.25rem;">${v.content || 'ç„¡å…§å®¹'}</div>
                    </div>
                    <div style="grid-column: span 8 / span 8; margin-top: 0.25rem;">
                        <div style="font-size: 0.75rem; font-weight: 700; color: #2563eb; margin-bottom: 0.25rem;">å¾ŒçºŒè·Ÿé€² (Next Steps)</div>
                        <div style="font-size: 0.875rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.25rem;">${v.nextStep || '&nbsp;'}</div>
                    </div>
                    <div style="grid-column: span 4 / span 4; margin-top: 0.25rem;">
                        <div style="font-size: 0.75rem; font-weight: 700; color: #16a34a; margin-bottom: 0.25rem;">æ´½è«‡çµæœ / æ¥­ç¸¾</div>
                        <div style="font-size: 0.875rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.25rem;">${v.result || '&nbsp;'}</div>
                    </div>
                    </div>
                </div>
                `).join('');

                // 2. æ§‹å»ºå®Œæ•´çš„ HTML é é¢
                const fullContent = `
                <!DOCTYPE html>
                <html lang="zh-TW">
                <head>
                    <meta charset="UTF-8">
                    <title>æ¥­å‹™æ—¥å ±è¡¨_${reportDate}</title>
                    <style>
                    body { font-family: system-ui, -apple-system, sans-serif; color: #1f2937; padding: 40px; max-width: 900px; margin: 0 auto; }
                    @media print { body { padding: 0; } .no-print { display: none; } }
                    .header { display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 2px solid #1e40af; padding-bottom: 1rem; margin-bottom: 2rem; }
                    .title { font-size: 1.875rem; font-weight: 700; }
                    .sub-title { color: #6b7280; font-size: 0.875rem; margin-top: 0.5rem; }
                    .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; background-color: #eff6ff; padding: 1rem; border-radius: 0.25rem; margin-bottom: 2rem; border: 1px solid #dbeafe; }
                    .info-item label { display: block; font-size: 0.75rem; font-weight: 700; color: #1e40af; text-transform: uppercase; margin-bottom: 0.25rem; }
                    .info-item div { font-size: 1.125rem; font-weight: 500; border-bottom: 1px solid #d1d5db; padding-bottom: 0.25rem; }
                    .section-title { font-size: 1.125rem; font-weight: 700; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; color: #1f2937; }
                    .footer-section { display: grid; grid-template-columns: 1fr; gap: 2rem; margin-top: 2rem; page-break-inside: avoid; }
                    .supervisor-box { border: 2px solid #1f2937; border-radius: 0.5rem; overflow: hidden; }
                    .box-header { background-color: #1f2937; color: white; padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 700; display: flex; justify-content: space-between; }
                    .box-content { height: 8rem; padding: 1rem; position: relative; }
                    .signature-line { position: absolute; bottom: 1rem; right: 1rem; width: 12rem; border-bottom: 1px solid #9ca3af; text-align: right; font-size: 0.75rem; color: #9ca3af; padding-bottom: 0.25rem; }
                    .print-hint { background-color: #fef3c7; border: 1px solid #f59e0b; color: #92400e; padding: 10px; text-align: center; margin-bottom: 20px; border-radius: 6px; font-weight: bold; }
                    </style>
                </head>
                <body>
                    <div class="no-print print-hint">ğŸ’¡ æç¤ºï¼šè«‹æŒ‰ Ctrl+P (æˆ– Cmd+P) åˆ—å°æ­¤é é¢æˆ–å¦å­˜ç‚º PDF</div>
                    
                    <header class="header">
                    <div>
                        <div class="title">æ¥­å‹™æ‹œè¨ªæ—¥å ±è¡¨</div>
                        <div class="sub-title">Daily Sales Report</div>
                    </div>
                    <div>
                        <span style="font-weight: 600; color: #4b5563;">æ—¥æœŸï¼š</span>
                        <span style="font-size: 1.125rem;">${reportDate}</span>
                    </div>
                    </header>

                    <section class="info-grid">
                    <div class="info-item">
                        <label>æ¥­å‹™å§“å (Sales Rep)</label>
                        <div>${salesName || '&nbsp;'}</div>
                    </div>
                    <div class="info-item">
                        <label>éƒ¨é–€/å€åŸŸ (Department)</label>
                        <div>${department || '&nbsp;'}</div>
                    </div>
                    </section>

                    <section>
                    <div class="section-title">æœ¬æ—¥æ‹œè¨ªç´€éŒ„</div>
                    ${visitsHTML}
                    </section>

                    <div class="footer-section">
                    <div style="border: 1px solid #d1d5db; border-radius: 0.5rem; padding: 1rem; background-color: #fefce8;">
                        <div style="font-size: 0.875rem; font-weight: 700; color: #374151; margin-bottom: 0.5rem;">æ¥­å‹™å‚™è¨» / éœ€ä¸»ç®¡å”åŠ©äº‹é …</div>
                        <div style="font-size: 0.875rem; white-space: pre-wrap;">${noteToSupervisor || 'ç„¡'}</div>
                    </div>

                    <div class="supervisor-box">
                        <div class="box-header">
                            <span>ä¸»ç®¡æºé€š / æ‰¹ç¤ºæ¬„</span>
                            <span style="font-weight: 400; color: #d1d5db; font-size: 0.75rem;">è«‹ä¸»ç®¡æ–¼æ­¤è™•ç°½æ ¸</span>
                        </div>
                        <div class="box-content">
                            <div class="signature-line">ä¸»ç®¡ç°½ç« </div>
                        </div>
                    </div>
                    </div>
                    
                    <footer style="margin-top: 2rem; text-align: center; font-size: 0.75rem; color: #9ca3af;">
                    è¡¨å–®ç”Ÿæˆæ™‚é–“ï¼š${new Date().toLocaleString('zh-TW')}
                    </footer>
                </body>
                </html>
                `;

                // 3. è§¸ç™¼ä¸‹è¼‰
                const blob = new Blob([fullContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `æ¥­å‹™æ—¥å ±_${salesName}_${reportDate}.html`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                setStatusMessage('æª”æ¡ˆä¸‹è¼‰æˆåŠŸï¼è«‹é–‹å•Ÿè©²æª”æ¡ˆé€²è¡Œåˆ—å°');
                setTimeout(() => setStatusMessage(''), 5000);
            };

            return (
                <div className="min-h-screen bg-gray-100 p-4 md:p-8 font-sans text-gray-800">
                
                {/* æ“ä½œæ§åˆ¶åˆ— (åˆ—å°æ™‚éš±è—) */}
                <div className="max-w-4xl mx-auto mb-6 flex flex-col sm:flex-row justify-between items-center print:hidden bg-white p-4 rounded-lg shadow-sm border border-gray-200 gap-4">
                    <div>
                    <h1 className="text-xl font-bold text-blue-800 flex items-center gap-2">
                        <FileText className="w-6 h-6" />
                        æ¥­å‹™æ—¥å ±ç”Ÿæˆå™¨
                    </h1>
                    <p className="text-sm text-gray-500 mt-1">ç„¡æ³•åˆ—å°ï¼Ÿè«‹æ”¹ç”¨å³å´çš„ã€ŒåŒ¯å‡ºæª”æ¡ˆã€åŠŸèƒ½</p>
                    </div>
                    
                    {/* æŒ‰éˆ•å€åŸŸ */}
                    <div className="flex flex-col items-end gap-2">
                    <button 
                        onClick={handleExportHTML}
                        className="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 shadow-lg transition-all font-bold active:scale-95 transform hover:-translate-y-0.5"
                        title="ä¸‹è¼‰å®Œæ•´æ ¼å¼çš„æª”æ¡ˆï¼Œä»¥ä¾¿åˆ—å°"
                    >
                        <FileDown className="w-6 h-6" />
                        åŒ¯å‡ºæª”æ¡ˆ (ä¾›åˆ—å°/PDF)
                    </button>
                    
                    {/* ç‹€æ…‹æç¤ºæ–‡å­— */}
                    {statusMessage && (
                        <div className="text-sm text-green-600 font-bold animate-pulse flex items-center gap-1 bg-green-50 px-2 py-1 rounded">
                        <Info className="w-4 h-4" />
                        {statusMessage}
                        </div>
                    )}
                    </div>
                </div>

                {/* å ±è¡¨ä¸»é«” (A4 ç´™å¼µæ¨¡æ“¬) */}
                <div className="max-w-4xl mx-auto bg-white shadow-lg print:shadow-none print:w-full print:max-w-none min-h-[297mm] relative p-8 md:p-12 print:p-0">
                    
                    {/* å ±è¡¨æ¨™é ­ */}
                    <header className="border-b-2 border-blue-800 pb-4 mb-8">
                    <div className="flex justify-between items-end">
                        <div>
                        <h2 className="text-3xl font-bold text-gray-900 tracking-wide">æ¥­å‹™æ‹œè¨ªæ—¥å ±è¡¨</h2>
                        <p className="text-gray-500 mt-2 text-sm">Daily Sales Report</p>
                        </div>
                        <div className="text-right">
                        <div className="flex items-center gap-2 justify-end mb-1">
                            <span className="font-semibold text-gray-600">æ—¥æœŸï¼š</span>
                            <input 
                            type="date" 
                            value={reportDate} 
                            onChange={(e) => setReportDate(e.target.value)}
                            className="border-b border-gray-300 focus:border-blue-600 outline-none text-right bg-transparent print:border-none"
                            />
                        </div>
                        </div>
                    </div>
                    </header>

                    {/* æ¥­å‹™äººå“¡è³‡è¨Š */}
                    <section className="grid grid-cols-2 gap-8 mb-8 bg-blue-50 p-4 rounded print:bg-transparent print:p-0 print:border print:border-gray-300">
                    <div className="flex flex-col">
                        <label className="text-xs font-bold text-blue-800 uppercase mb-1">æ¥­å‹™å§“å (Sales Rep)</label>
                        <input 
                        type="text" 
                        placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å"
                        value={salesName}
                        onChange={(e) => setSalesName(e.target.value)}
                        className="w-full bg-transparent border-b border-gray-300 focus:border-blue-500 outline-none py-1 print:border-none font-medium text-lg"
                        />
                    </div>
                    <div className="flex flex-col">
                        <label className="text-xs font-bold text-blue-800 uppercase mb-1">éƒ¨é–€/å€åŸŸ (Department)</label>
                        <input 
                        type="text" 
                        placeholder="ä¾‹ï¼šåŒ—å€æ¥­å‹™ä¸€éƒ¨"
                        value={department}
                        onChange={(e) => setDepartment(e.target.value)}
                        className="w-full bg-transparent border-b border-gray-300 focus:border-blue-500 outline-none py-1 print:border-none font-medium text-lg"
                        />
                    </div>
                    </section>

                    {/* æ‹œè¨ªå…§å®¹åˆ—è¡¨ */}
                    <section className="mb-8">
                    <div className="flex justify-between items-center mb-4 border-b border-gray-200 pb-2">
                        <h3 className="text-lg font-bold text-gray-800 flex items-center gap-2">
                        <Briefcase className="w-5 h-5 text-blue-600" />
                        æœ¬æ—¥æ‹œè¨ªç´€éŒ„
                        </h3>
                        <button 
                        onClick={addVisit}
                        className="text-sm bg-green-100 text-green-700 hover:bg-green-200 px-3 py-1 rounded-full flex items-center gap-1 print:hidden transition-colors"
                        >
                        <Plus className="w-4 h-4" /> æ–°å¢è¡Œç¨‹
                        </button>
                    </div>

                    <div className="space-y-6">
                        {visits.map((visit, index) => (
                        <div key={visit.id} className="relative border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow print:border-gray-300 print:shadow-none break-inside-avoid">
                            {/* åˆªé™¤æŒ‰éˆ• (åˆ—å°æ™‚éš±è—) */}
                            {visits.length > 1 && (
                            <button 
                                onClick={() => removeVisit(visit.id)}
                                className="absolute top-4 right-4 text-gray-400 hover:text-red-500 print:hidden p-1"
                                title="åˆªé™¤æ­¤ç´€éŒ„"
                            >
                                <Trash2 className="w-5 h-5" />
                            </button>
                            )}

                            <div className="grid grid-cols-1 md:grid-cols-12 gap-4">
                            {/* ç¬¬ä¸€è¡Œï¼šåº—å®¶èˆ‡å°æ¥äºº */}
                            <div className="md:col-span-8">
                                <div className="flex items-center gap-2 mb-1">
                                <MapPin className="w-4 h-4 text-gray-400" />
                                <label className="text-xs font-bold text-gray-500">åº—å®¶åç¨± / å®¢æˆ¶</label>
                                </div>
                                <input 
                                type="text" 
                                placeholder="è¼¸å…¥å®¢æˆ¶åç¨±"
                                value={visit.storeName}
                                onChange={(e) => updateVisit(visit.id, 'storeName', e.target.value)}
                                className="w-full font-bold text-lg border-b border-gray-200 focus:border-blue-500 outline-none pb-1 bg-transparent placeholder-gray-300 print:border-none"
                                />
                            </div>
                            <div className="md:col-span-4">
                                <div className="flex items-center gap-2 mb-1">
                                <User className="w-4 h-4 text-gray-400" />
                                <label className="text-xs font-bold text-gray-500">å°æ¥äººå“¡ & è·ç¨±</label>
                                </div>
                                <input 
                                type="text" 
                                placeholder="ä¾‹ï¼šé™³åº—é•·"
                                value={visit.contactPerson}
                                onChange={(e) => updateVisit(visit.id, 'contactPerson', e.target.value)}
                                className="w-full text-base border-b border-gray-200 focus:border-blue-500 outline-none pb-1 bg-transparent placeholder-gray-300 print:border-none"
                                />
                            </div>

                            {/* ç¬¬äºŒè¡Œï¼šæ‹œè¨ªå…§å®¹ (å¤šè¡Œæ–‡å­—) */}
                            <div className="md:col-span-12 mt-2">
                                <div className="flex items-center gap-2 mb-1">
                                <MessageSquare className="w-4 h-4 text-gray-400" />
                                <label className="text-xs font-bold text-gray-500">æ‹œè¨ªå…§å®¹ / æ´½è«‡é‡é»</label>
                                </div>
                                <textarea 
                                rows={3}
                                placeholder="è«‹è©³ç´°æè¿°ä»Šæ—¥æ´½è«‡äº‹é …ã€å®¢æˆ¶éœ€æ±‚ã€ç”¢å“åé¥‹..."
                                value={visit.content}
                                onChange={(e) => updateVisit(visit.id, 'content', e.target.value)}
                                className="w-full text-sm leading-relaxed border border-gray-200 rounded p-2 focus:border-blue-500 outline-none resize-none bg-gray-50 print:bg-transparent print:border-none print:p-0 print:resize-none"
                                />
                            </div>

                            {/* ç¬¬ä¸‰è¡Œï¼šå¾ŒçºŒè¡Œå‹•èˆ‡çµæœ */}
                            <div className="md:col-span-8 mt-1">
                                <label className="text-xs font-bold text-blue-600 mb-1 block">å¾ŒçºŒè·Ÿé€² / å¾…è¾¦äº‹é … (Next Steps)</label>
                                <input 
                                type="text" 
                                placeholder="ä¾‹ï¼šä¸‹é€±ä¸‰å¯„é€å ±åƒ¹å–®"
                                value={visit.nextStep}
                                onChange={(e) => updateVisit(visit.id, 'nextStep', e.target.value)}
                                className="w-full text-sm border-b border-gray-200 focus:border-blue-500 outline-none pb-1 bg-transparent print:border-none"
                                />
                            </div>
                            <div className="md:col-span-4 mt-1">
                                <label className="text-xs font-bold text-green-600 mb-1 block">æ´½è«‡çµæœ / é ä¼°æ¥­ç¸¾</label>
                                <input 
                                type="text" 
                                placeholder="ä¾‹ï¼šå·²ç°½ç´„ / æ½›åœ¨ $5000"
                                value={visit.result}
                                onChange={(e) => updateVisit(visit.id, 'result', e.target.value)}
                                className="w-full text-sm border-b border-gray-200 focus:border-blue-500 outline-none pb-1 bg-transparent print:border-none"
                                />
                            </div>
                            </div>
                        </div>
                        ))}
                    </div>
                    </section>

                    {/* åº•éƒ¨å€åŸŸï¼šè‡ªæˆ‘æª¢è¨ & ä¸»ç®¡æ‰¹ç¤º */}
                    <div className="grid grid-cols-1 gap-8 break-inside-avoid">
                        
                        {/* æ¥­å‹™å‚™è¨»æ¬„ */}
                        <div className="border border-gray-300 rounded-lg p-4 bg-yellow-50/50 print:bg-transparent">
                            <h3 className="text-sm font-bold text-gray-700 mb-2">æ¥­å‹™å‚™è¨» / éœ€ä¸»ç®¡å”åŠ©äº‹é …</h3>
                            <textarea 
                                rows={3}
                                placeholder="è‹¥æœ‰éœ€è¦ä¸»ç®¡å”åŠ©æˆ–ç‰¹åˆ¥èªªæ˜çš„å›°é›£ï¼Œè«‹å¡«å¯«æ–¼æ­¤..."
                                value={noteToSupervisor}
                                onChange={(e) => setNoteToSupervisor(e.target.value)}
                                className="w-full bg-transparent outline-none text-sm resize-none print:border-none"
                            />
                        </div>

                        {/* ä¸»ç®¡æºé€šæ¬„ (ä¿ç•™çµ¦ä¸»ç®¡å¡«å¯«) */}
                        <div className="border-2 border-gray-800 rounded-lg p-0 overflow-hidden">
                            <div className="bg-gray-800 text-white px-4 py-2 text-sm font-bold flex justify-between">
                                <span>ä¸»ç®¡æºé€š / æ‰¹ç¤ºæ¬„ (Supervisor Comments)</span>
                                <span className="font-normal text-gray-300 text-xs">è«‹ä¸»ç®¡æ–¼æ­¤è™•ç°½æ ¸èˆ‡å›é¥‹</span>
                            </div>
                            <div className="h-32 p-4 bg-white relative">
                                {/* é€™è£¡æ•…æ„ç•™ç™½æˆ–é¡¯ç¤ºåº•ç·šï¼Œæ–¹ä¾¿åˆ—å°å¾Œæ‰‹å¯« */}
                                <div className="absolute bottom-4 right-4 w-48 border-b border-gray-400 text-right text-xs text-gray-400 pb-1">
                                    ä¸»ç®¡ç°½ç« 
                                </div>
                                <div className="w-full h-full border-b border-dashed border-gray-200"></div>
                            </div>
                        </div>
                    </div>

                    {/* é å°¾ */}
                    <footer className="mt-8 text-center text-xs text-gray-400 print:text-xs print:mt-12">
                    <p>è¡¨å–®ç”Ÿæˆæ™‚é–“ï¼š{new Date().toLocaleString('zh-TW')} | Â© Company Internal Use</p>
                    </footer>

                </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
